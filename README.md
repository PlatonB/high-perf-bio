# Синопсис.
## Преимущества.
- Высокая скорость работы:
    - вплоть до 8 процессов одновременно;
    - в основе - известная своей производительностью СУБД _MongoDB_.
- Простота запуска любого компонента:
    - одна команда - обработка всех коллекций базы;
    - не более двух обязательных аргументов.
- Наглядность:
    - вывод примерной структуры интересующей БД.
- Полностью автоматическое чтение и создание VCF и BED.

# Тьюториал.
Компоненты high-perf-bio управляются исключительно командами. Если вы имели дело только с графическими интерфейсами, можете почитать [мой материал о командной строке](https://github.com/PlatonB/ngs-pipelines#преодолеваем-страх-командной-строки-linux). Ничего сложного там нет, а если что, [обращайтесь](https://github.com/PlatonB/high-perf-bio/issues), я помогу.

Чтобы не прописывать каждый раз путь к тому или иному компоненту, перейдём в основную папку инструментария.
```
cd $HOME/Программы/high-perf-bio-master
```
Примечание: корректируйте приведённые в примерах пути в зависимости от реального расположения ваших папок или файлов.

Для удобства можете вывести имена всех программ проекта high-perf-bio.
```
ls
```

Каждый инструмент содержит подробную справку. Пока с ней не ознакомились, реальные задачи не запускайте.
```
python create_db.py -h
```
```
python annotator.py -h
```
и т.д..

В папке high-perf-bio-master уже есть небольшие примеры данных. Но в качестве материала для базы лучше скачать что-то серьёзное, например, VCF-таблицу [распространённых SNP](ftp://ftp.ncbi.nih.gov/snp/organisms/human_9606_b151_GRCh38p7/VCF/common_all_20180418.vcf.gz).

Поскольку формат этого файла - VCF, программа создания БД сама отбросит технические строки, сконвертирует ячейки определённых столбцов в BSON-структуры и проиндексирует поля с хромосомами и позициями. Файл - один, значит, распараллелить загрузку не удастся. Таким образом, команда может получиться весьма минималистичной.
```
python create_db.py -S $HOME/dbSNP_common
```

Есть вероятность возникновения двух проблем: вы забыли, как называется БД и из чего она состоит. В таких ситуациях перед запуском любого парсера требуется получить представление о парсимой БД. Для начала найдите её имя в списке всех имён.
```
python print_db_info.py
```

Затем выведите имена коллекций, индексов и другие первостепенные характеристики конкретной базы.
```
python print_db_info.py -d dbSNP_common
```

Теперь мы многое знаем о БД и можем, к примеру, осуществить по ней запрос. Допустим, отберём снипы интервала chr14:105746998-105803861, упомянутого в статье "Локусы влияющие на экспрессию антигенов HLA в участке 14-й хромосомы, ассоциированном с развитием рассеянного склероза, и функции расположенных в них генов" (П.А. Быкадоров и др.).
```
python make_request.py -D dbSNP_common -T $HOME/результаты -q '{"#CHROM": "14", "POS": {"$gt": 105746998, "$lt": 105803861}}'
```
